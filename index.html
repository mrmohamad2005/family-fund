<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØµÙ†Ø¯ÙˆÙ‚ Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ</title>
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@100..900&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #3b82f6; /* Ø¢Ø¨ÛŒ */
            --secondary: #10b981; /* Ø³Ø¨Ø² */
            --background: #f3f4f6; /* Ø®Ø§Ú©Ø³ØªØ±ÛŒ Ø±ÙˆØ´Ù† */
            --card-bg: #ffffff;
            --text-color: #1f2937;
            --red-text: #ef4444;
            --green-text: #10b981;
            --winner-color: #f59e0b; /* Ø·Ù„Ø§ÛŒÛŒ */
            --border-color: #e5e7eb;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Vazirmatn', sans-serif;
        }

        body {
            background-color: var(--background);
            color: var(--text-color);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            display: flex;
            gap: 20px;
        }

        .main-content {
            flex-grow: 1;
            max-width: 900px;
        }

        .sidebar {
            width: 300px;
            background-color: var(--card-bg);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            height: fit-content;
            transition: transform 0.3s ease-in-out;
            position: sticky;
            top: 20px;
        }
        
        @media (max-width: 992px) {
            .container {
                 flex-direction: column;
            }
            .sidebar {
                 width: 100%;
                 position: fixed;
                 bottom: 0;
                 left: 0;
                 right: 0;
                 transform: translateX(100%);
                 z-index: 1000;
                 border-radius: 12px 12px 0 0;
                 padding-bottom: 70px; /* Ø¨Ø±Ø§ÛŒ ÙØ¶Ø§ÛŒ Ø¯Ú©Ù…Ù‡ Ø¨Ø³ØªÙ† */
            }
            .sidebar.active {
                 transform: translateX(0);
            }
            .sidebar-overlay {
                 display: none;
                 position: fixed;
                 top: 0;
                 left: 0;
                 right: 0;
                 bottom: 0;
                 background: rgba(0, 0, 0, 0.5);
                 z-index: 999;
            }
            .sidebar-overlay.active {
                 display: block;
            }
            .close-sidebar-btn {
                display: block !important;
                position: absolute;
                top: 10px;
                left: 10px;
                background: var(--red-text);
                color: white;
                border: none;
                border-radius: 50%;
                width: 30px;
                height: 30px;
                font-size: 1.2rem;
                cursor: pointer;
            }
        }

        /* --- Navbar --- */
        .navbar {
            background-color: var(--card-bg);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            padding: 10px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 50;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 900;
            color: var(--primary);
        }

        .nav-buttons button {
            background: var(--primary);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 8px;
            cursor: pointer;
            margin-right: 10px;
            transition: background 0.2s;
            font-weight: 500;
        }

        .nav-buttons button:hover {
            background: #2563eb;
        }
        
        .nav-buttons .btn-admin-nav {
            background: #1f2937;
        }
        .nav-buttons .btn-admin-nav:hover {
            background: #374151;
        }
        
        .nav-buttons .btn-sidebar {
             background: #6b7280;
             display: none;
        }
        
        @media (max-width: 992px) {
             .nav-buttons .btn-sidebar {
                 display: inline-block;
             }
        }

        /* --- Stats Card and Countdown --- */
        .stats-card {
            background-color: var(--card-bg);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            margin-bottom: 20px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-top: 15px;
            text-align: center;
        }
        
        @media (max-width: 600px) {
             .stats-grid {
                 grid-template-columns: 1fr;
            }
        }

        .stat-item {
            background: var(--background);
            padding: 15px;
            border-radius: 8px;
        }

        .stat-item h4 {
            font-size: 0.9rem;
            color: #6b7280;
            margin-bottom: 5px;
        }

        .stat-item p {
            font-size: 1.5rem;
            font-weight: 900;
            color: var(--text-color);
        }
        
        /* Countdown Timer */
        .countdown-header {
             font-size: 1rem;
             font-weight: 700;
             text-align: center;
             margin-bottom: 10px;
             color: var(--primary);
        }
        
        .countdown-timer {
             display: flex;
             justify-content: center;
             gap: 10px;
             margin-bottom: 10px;
        }
        
        .timer-unit {
             background: var(--primary);
             color: white;
             padding: 8px 15px;
             border-radius: 8px;
             font-size: 1.8rem;
             font-weight: 900;
             text-align: center;
        }
        
        .timer-label {
             display: block;
             font-size: 0.7rem;
             font-weight: 500;
             margin-top: 5px;
        }


        /* --- Members List --- */
        .members-section h2 {
            font-size: 1.4rem;
            margin-bottom: 15px;
            border-bottom: 2px solid var(--primary);
            padding-bottom: 5px;
        }

        .member-card {
            background-color: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
        }

        .member-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .member-name {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--primary);
        }

        .member-phone {
            font-size: 0.85rem;
            color: #6b7280;
        }

        .status-badge {
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.75rem;
            font-weight: 700;
            white-space: nowrap;
        }

        .status-paid { background: #d1fae5; color: var(--green-text); }
        .status-unpaid { background: #fee2e2; color: var(--red-text); }
        .status-awaiting-approval { background: #fef3c7; color: #d97706; }

        .action-row {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 8px 12px;
            border-radius: 6px;
            border: none;
            cursor: pointer;
            font-weight: 500;
            transition: background 0.2s;
            font-size: 0.9rem;
        }

        .btn-upload { background: var(--primary); color: white; }
        .btn-upload:hover { background: #2563eb; }

        .btn-receipt { background: #e5e7eb; color: var(--text-color); }
        .btn-receipt:hover { background: #d1d5db; }
        
        .btn-nudge { background: #fcd34d; color: #92400e; }
        .btn-nudge:hover { background: #fbbf24; }
        .btn-nudge .nudge-count {
             background: #92400e;
             color: white;
             padding: 2px 6px;
             border-radius: 50%;
             margin-right: 5px;
             font-size: 0.7rem;
        }

        .btn-disabled { opacity: 0.6; cursor: not-allowed; }
        
        #emptyState {
            text-align: center;
            padding: 40px;
            background: #fff;
            border-radius: 12px;
            border: 1px dashed var(--border-color);
            color: #6b7280;
            font-size: 1.1rem;
        }


        /* --- Sidebar Content --- */
        .sidebar-box {
            background-color: var(--background);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
        }
        
        .user-profile-card {
            text-align: center;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 15px;
            margin-bottom: 15px;
        }

        .sidebar-box h3 {
            font-size: 1.1rem;
            color: var(--primary);
            margin-bottom: 10px;
            border-bottom: 2px solid var(--primary);
            padding-bottom: 5px;
        }
        
        .winner-box {
             text-align: center;
             padding: 15px;
             background: #fffbe6;
             border: 1px solid #fde68a;
             border-radius: 8px;
        }


        /* --- Modals --- */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.6);
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background-color: var(--card-bg);
            padding: 30px;
            border-radius: 12px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            position: relative;
        }

        .close-btn {
            color: #aaa;
            float: left;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        .close-btn:hover,
        .close-btn:focus {
            color: var(--text-color);
            text-decoration: none;
        }

        .modal-content h2 {
            margin-bottom: 20px;
            color: var(--primary);
            border-bottom: 2px solid var(--primary);
            padding-bottom: 5px;
        }

        .modal-content form label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }

        .modal-content input[type="text"],
        .modal-content input[type="tel"],
        .modal-content input[type="file"],
        .modal-content input[type="password"] {
            width: 100%;
            padding: 10px;
            margin-bottom: 15px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
        }

        .modal-content button[type="submit"] {
            width: 100%;
            background: var(--secondary);
            color: white;
            padding: 12px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 700;
            transition: background 0.2s;
        }

        .modal-content button[type="submit"]:hover {
            background: #059669;
        }
        
        /* Receipt Modal */
        #receiptModal .modal-content {
             max-width: 90%;
             max-height: 90vh;
             padding: 15px;
        }
        #receiptModal img {
             max-width: 100%;
             max-height: 85vh;
             display: block;
             margin: 0 auto;
             border-radius: 8px;
             box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }
        
        /* Toast Notification */
        #toast {
            visibility: hidden;
            min-width: 250px;
            background-color: #333;
            color: #fff;
            text-align: center;
            border-radius: 8px;
            padding: 16px;
            position: fixed;
            z-index: 3000;
            right: 30px;
            bottom: 30px;
            font-size: 1rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        #toast.show {
            visibility: visible;
            -webkit-animation: fadein 0.5s, fadeout 0.5s 2.5s;
            animation: fadein 0.5s, fadeout 0.5s 2.5s;
        }

        @-webkit-keyframes fadein {
            from { bottom: 0; opacity: 0; }
            to { bottom: 30px; opacity: 1; }
        }

        @keyframes fadein {
            from { bottom: 0; opacity: 0; }
            to { bottom: 30px; opacity: 1; }
        }

        @-webkit-keyframes fadeout {
            from { bottom: 30px; opacity: 1; }
            to { bottom: 0; opacity: 0; }
        }

        @keyframes fadeout {
            from { bottom: 30px; opacity: 1; }
            to { bottom: 0; opacity: 0; }
        }
        
        /* --- Admin Panel --- */
        #adminPanel {
             display: none;
             padding: 20px;
        }
        
        .admin-header {
             display: flex;
             justify-content: space-between;
             align-items: center;
             margin-bottom: 30px;
             border-bottom: 2px solid var(--red-text);
             padding-bottom: 10px;
        }
        
        .admin-header h1 {
             color: var(--text-color);
        }

        .admin-dashboard-grid {
             display: grid;
             grid-template-columns: repeat(4, 1fr);
             gap: 20px;
             margin-bottom: 30px;
        }
        
        @media (max-width: 1200px) {
             .admin-dashboard-grid {
                 grid-template-columns: repeat(2, 1fr);
            }
        }
        @media (max-width: 600px) {
             .admin-dashboard-grid {
                 grid-template-columns: 1fr;
            }
        }
        
        .admin-stat-card {
             background: var(--card-bg);
             padding: 15px;
             border-radius: 8px;
             box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
             text-align: center;
        }
        
        .admin-stat-card h4 {
             font-size: 0.9rem;
             color: #6b7280;
             margin-bottom: 5px;
        }
        
        .admin-stat-card p {
             font-size: 1.8rem;
             font-weight: 900;
             color: var(--text-color);
        }
        
        #adminNotificationCard {
             background: #fef3c7;
             border-left: 5px solid #d97706;
             cursor: pointer;
             transition: background 0.2s;
        }
        #adminNotificationCard:hover {
             background: #fde68a;
        }
        #adminNotificationCard p {
             color: #d97706;
        }
        
        .admin-table-container {
             background: var(--card-bg);
             padding: 20px;
             border-radius: 12px;
             box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
             overflow-x: auto;
             margin-bottom: 30px;
        }
        
        .admin-table-container h2 {
             font-size: 1.3rem;
             margin-bottom: 15px;
        }
        
        .admin-table {
             width: 100%;
             border-collapse: collapse;
             min-width: 800px;
        }
        
        .admin-table th, .admin-table td {
             padding: 12px 15px;
             border-bottom: 1px solid var(--border-color);
             text-align: right;
             font-size: 0.9rem;
        }
        
        .admin-table th {
             background-color: var(--background);
             color: var(--text-color);
             font-weight: 700;
        }
        
        .admin-table tbody tr:hover {
             background-color: #f9fafb;
        }
        
        .pending-row {
             background-color: #fef9c3;
        }
        
        .btn-admin {
             padding: 5px 10px;
             border-radius: 4px;
             border: none;
             cursor: pointer;
             font-weight: 500;
             margin: 3px 2px;
             font-size: 0.8rem;
        }
        
        .btn-verify-member { background: var(--secondary); color: white; }
        .btn-verify-payment { background: var(--primary); color: white; }
        .btn-receipt { background: #60a5fa; color: white; }
        .btn-delete-member { background: var(--red-text); color: white; }
        .btn-select-winner { background: #f59e0b; color: white; }
        
        .btn-full {
             width: 100%;
             background: var(--primary);
             color: white;
             padding: 10px;
             border: none;
             border-radius: 8px;
             cursor: pointer;
             font-weight: 700;
             margin-top: 10px;
        }

        /* Admin Settings Section */
        .admin-settings-grid {
             display: grid;
             grid-template-columns: repeat(2, 1fr);
             gap: 20px;
             margin-bottom: 30px;
        }
        @media (max-width: 768px) {
             .admin-settings-grid {
                 grid-template-columns: 1fr;
            }
        }
        
        .settings-card {
             background: var(--card-bg);
             padding: 20px;
             border-radius: 12px;
             box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }
        
        .settings-card h3 {
             color: var(--red-text);
             font-size: 1.1rem;
             margin-bottom: 15px;
             border-bottom: 1px dashed var(--red-text);
             padding-bottom: 5px;
        }
        
        /* Monthly Archives Section */
        .archives-header {
             display: flex;
             justify-content: space-between;
             align-items: center;
             margin-bottom: 15px;
             border-bottom: 2px solid #6b7280;
             padding-bottom: 5px;
        }
        
        .monthly-archive-box {
             background: var(--card-bg);
             border: 1px solid var(--border-color);
             padding: 15px;
             border-radius: 8px;
             margin-bottom: 10px;
             cursor: pointer;
             transition: all 0.2s;
        }
        
        .monthly-archive-box:hover {
             background: #f9fafb;
             border-color: var(--primary);
        }
        
        .monthly-archive-box.active {
             border-color: var(--winner-color);
             box-shadow: 0 0 0 3px #fde68a;
        }
        
        .archive-header {
             display: flex;
             justify-content: space-between;
             font-weight: 700;
             margin-bottom: 5px;
        }
        .archive-stats {
             font-size: 0.9rem;
             color: #6b7280;
        }
        
        /* Summary Modal Styles */
        #summaryModal .summary-stat {
             flex: 1;
             background: var(--background);
             padding: 15px;
             border-radius: 8px;
             text-align: center;
        }
        #summaryModal .summary-stat h4 {
             color: #6b7280;
             font-size: 0.9rem;
             margin-bottom: 5px;
        }
        .paid-list {
             max-height: 250px;
             overflow-y: auto;
             padding-left: 10px;
        }
        .paid-item {
             display: flex;
             justify-content: space-between;
             padding: 8px 0;
             border-bottom: 1px dotted var(--border-color);
        }
        .paid-item:last-child { border-bottom: none; }
        .paid-item-name { font-weight: 500; }
        .paid-item-date { font-size: 0.8rem; color: #9ca3af; }
        
        /* Receipts History Modal */
        #adminReceiptsModal .modal-content {
             max-width: 700px;
        }
        #receiptsHistoryContent {
             display: grid;
             grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
             gap: 15px;
             max-height: 60vh;
             overflow-y: auto;
             padding: 10px;
        }
        .receipt-history-item {
             border: 1px solid var(--border-color);
             border-radius: 8px;
             padding: 10px;
             text-align: center;
        }
        .receipt-history-item img {
             width: 100%;
             height: auto;
             max-height: 150px;
             object-fit: contain;
             margin-top: 10px;
             border-radius: 4px;
             cursor: pointer;
        }

    </style>
</head>
<body>

    <nav class="navbar" id="mainNavBar" style="display: none;">
        <div class="logo">
            <span style="color:var(--primary);">ØµÙ†Ø¯ÙˆÙ‚</span> <span style="color:var(--secondary);">Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ</span>
        </div>
        <div class="nav-buttons">
            <button id="btnJoinNav" onclick="openModal('joinModal')" style="display:none;">+ Ø¹Ø¶ÙˆÛŒØª</button>
            <button class="btn-admin-nav" onclick="showAdminPanel()">Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª</button>
            <button class="btn-sidebar" onclick="toggleSidebar()">â„¹ï¸</button>
        </div>
    </nav>
    
    <div class="container">
        
        <div class="main-content" id="mainAppContainer" style="display:none;">
            
            <div class="stats-card" id="countdownContainer" style="display:none;">
                <div class="countdown-header">Ø²Ù…Ø§Ù† Ø¨Ø§Ù‚ÛŒâ€ŒÙ…Ø§Ù†Ø¯Ù‡ ØªØ§ Ù¾Ø§ÛŒØ§Ù† Ù…Ø§Ù‡ **Ø¢Ø°Ø±** Ùˆ Ù‚Ø±Ø¹Ù‡â€ŒÚ©Ø´ÛŒ</div>
                <div class="countdown-timer" id="countdownTimer">
                    <div class="timer-unit"><span id="timerDays">00</span><span class="timer-label">Ø±ÙˆØ²</span></div>
                    <div class="timer-unit"><span id="timerHours">00</span><span class="timer-label">Ø³Ø§Ø¹Øª</span></div>
                    <div class="timer-unit"><span id="timerMinutes">00</span><span class="timer-label">Ø¯Ù‚ÛŒÙ‚Ù‡</span></div>
                    <div class="timer-unit"><span id="timerSeconds">00</span><span class="timer-label">Ø«Ø§Ù†ÛŒÙ‡</span></div>
                </div>

                <div class="stats-grid">
                    <div class="stat-item">
                        <h4>Ø§Ø¹Ø¶Ø§ÛŒ Ú©Ù„</h4>
                        <p id="totalMembers">0</p>
                    </div>
                    <div class="stat-item">
                        <h4>Ù…Ø¨Ù„Øº Ø¬Ù…Ø¹â€ŒØ¢ÙˆØ±ÛŒ Ø´Ø¯Ù‡</h4>
                        <p id="totalFund">0 ØªÙˆÙ…Ø§Ù†</p>
                    </div>
                    <div class="stat-item">
                        <h4>Ø³Ù‡Ù… Ù‡Ø± Ù†ÙØ± (Ù…Ø§Ù‡Ø§Ù†Ù‡)</h4>
                        <p>1,000,000</p>
                    </div>
                </div>
            </div>
            
            <div class="members-section">
                <h2>Ø§Ø¹Ø¶Ø§ÛŒ ØµÙ†Ø¯ÙˆÙ‚</h2>
                <div id="membersList">
                    </div>
                
                <div id="emptyState" style="display: none;">
                    Ù‡ÛŒÚ† Ø¹Ø¶ÙˆÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯. Ø§ÙˆÙ„ÛŒÙ† Ù†ÙØ± Ø¨Ø§Ø´ÛŒØ¯!
                </div>
            </div>

        </div>

        <div class="sidebar" id="appSidebar">
            <button class="close-sidebar-btn" onclick="toggleSidebar()" style="display: none;">Ã—</button>
            <div id="sidebarProfileCard">
                <p style="color:#666; text-align:center; padding-bottom: 10px;">ÙˆØ§Ø±Ø¯ Ø­Ø³Ø§Ø¨ Ø®ÙˆØ¯ Ù†Ø´Ø¯Ù‡â€ŒØ§ÛŒØ¯.</p>
                <button class="btn-full" onclick="openModal('userLoginModal')">ÙˆØ±ÙˆØ¯ Ù…Ø¬Ø¯Ø¯</button>
            </div>
            
            <div class="sidebar-box">
                <h3>ğŸ† Ø¨Ø±Ù†Ø¯Ù‡ Ù…Ø§Ù‡ Ø§Ø®ÛŒØ±</h3>
                <div class="winner-box" id="currentWinnerProfile">
                    <p style="font-size:0.9rem; color:#666; text-align:center;">Ù‡Ù†ÙˆØ² Ø¨Ø±Ù†Ø¯Ù‡ Ù…Ø§Ù‡ Ø¬Ø§Ø±ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª.</p>
                </div>
            </div>

            <div class="sidebar-box">
                <h3>ğŸ’¡ Ø¯Ø±Ø¨Ø§Ø±Ù‡ ØµÙ†Ø¯ÙˆÙ‚</h3>
                <p style="font-size:0.9rem; color:#4b5563;">
                    Ø§ÛŒÙ† ØµÙ†Ø¯ÙˆÙ‚ Ù…Ø§Ù‡Ø§Ù†Ù‡ Ø¨ÛŒÙ† Ø§Ø¹Ø¶Ø§ÛŒ ØªØ£ÛŒÛŒØ¯ Ø´Ø¯Ù‡ Ùˆ Ù¾Ø±Ø¯Ø§Ø®Øª Ú©Ù†Ù†Ø¯Ù‡ Ù‚Ø±Ø¹Ù‡â€ŒÚ©Ø´ÛŒ Ù…ÛŒâ€ŒØ´ÙˆØ¯.
                    Ø³Ù‡Ù… Ù…Ø§Ù‡Ø§Ù†Ù‡ **Û±,Û°Û°Û°,Û°Û°Û° ØªÙˆÙ…Ø§Ù†** Ø§Ø³Øª.
                </p>
            </div>
        </div>

    </div>
    
    <div id="adminPanel" style="display:none;">
        <div class="admin-header">
            <h1>Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ù…Ø¯ÛŒØ±ÛŒØª ØµÙ†Ø¯ÙˆÙ‚</h1>
            <button class="btn-full" style="width:100px; background:var(--text-color);" onclick="hideAdminPanel()">Ø®Ø±ÙˆØ¬</button>
        </div>
        
        <div class="modal-content" id="passwordForm" style="display:none; max-width: 400px; margin: 20px auto;">
            <h2 style="color: var(--red-text);">ğŸ” ÙˆØ±ÙˆØ¯ Ø§Ø¯Ù…ÛŒÙ†</h2>
            <form onsubmit="checkAdminPassword(event)">
                <label for="adminPassword">Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ù…Ø¯ÛŒØ±ÛŒØª:</label>
                <input type="password" id="adminPassword" required>
                <button type="submit" style="background: var(--red-text);">ÙˆØ±ÙˆØ¯</button>
            </form>
        </div>
        
        <div id="adminContent" style="display:none;">
            
            <div class="admin-dashboard-grid">
                <div class="admin-stat-card">
                    <h4>ØªØ¹Ø¯Ø§Ø¯ Ú©Ù„ Ø§Ø¹Ø¶Ø§</h4>
                    <p id="totalMembersAdmin">0</p>
                </div>
                <div class="admin-stat-card">
                    <h4>Ù¾Ø±Ø¯Ø§Ø®Øª Ù…ÙˆÙÙ‚ (Ù…Ø§Ù‡ <span id="currentMonthName"></span>)</h4>
                    <p id="adminPaidCount">0</p>
                </div>
                <div class="admin-stat-card">
                    <h4>Ù…Ø¨Ù„Øº Ø¬Ù…Ø¹â€ŒØ¢ÙˆØ±ÛŒ Ø´Ø¯Ù‡ (Ù…Ø§Ù‡ <span id="currentMonthNameSmall"></span>)</h4>
                    <p id="adminTotalFund">0</p>
                </div>
                <div class="admin-stat-card" id="adminNotificationCard" onclick="scrollToTable()">
                    <h4>ØªØ£ÛŒÛŒØ¯/ÙÛŒØ´ Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø±</h4>
                    <p id="newMemberCount">0</p>
                </div>
            </div>
            
            <div class="admin-table-container">
                <h2 id="currentMonthTitle">Ø¬Ø¯ÙˆÙ„ Ù…Ø¯ÛŒØ±ÛŒØª Ø§Ø¹Ø¶Ø§ÛŒ Ù…Ø§Ù‡</h2>
                <table class="admin-table">
                    <thead>
                        <tr>
                            <th>Ù†Ø§Ù…</th>
                            <th>Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³</th>
                            <th>ÙˆØ¶Ø¹ÛŒØª</th>
                            <th style="text-align:center;">ÙÛŒØ´â€ŒÙ‡Ø§</th>
                            <th style="text-align:center;">ØªØ°Ú©Ø±</th>
                            <th>Ø¹Ù…Ù„ÛŒØ§Øª</th>
                        </tr>
                    </thead>
                    <tbody id="adminMembersTableBody">
                        </tbody>
                </table>
            </div>
            
            <div class="admin-settings-grid">
                 
                 <div class="settings-card">
                     <h3 style="color: var(--primary); border-color: var(--primary);">ğŸ—„ï¸ Ø¢Ø±Ø´ÛŒÙˆ Ù…Ø§Ù‡Ø§Ù†Ù‡</h3>
                     <div id="monthlyArchivesContainer">
                         </div>
                 </div>

                 <div class="settings-card">
                     <h3 style="color: var(--red-text);">âš™ï¸ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ùˆ Ø±Ù…Ø²Ù‡Ø§</h3>
                     
                     <form onsubmit="changeAdminPassword(event)" style="margin-bottom: 20px;">
                          <label for="newAdminPassword">ØªØºÛŒÛŒØ± Ø±Ù…Ø² Ø§Ø¯Ù…ÛŒÙ†:</label>
                          <input type="password" id="newAdminPassword" placeholder="Ø±Ù…Ø² Ø¬Ø¯ÛŒØ¯ Ø§Ø¯Ù…ÛŒÙ†" required>
                          <button type="submit" class="btn-full" style="background: #374151;">ØªØºÛŒÛŒØ±</button>
                     </form>
                     
                     <form onsubmit="changeUserPassword(event)" style="margin-bottom: 20px;">
                          <label for="newUserPassword">ØªØºÛŒÛŒØ± Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø¹Ù…ÙˆÙ…ÛŒ:</label>
                          <input type="password" id="newUserPassword" placeholder="Ø±Ù…Ø² Ø¬Ø¯ÛŒØ¯ Ø¹Ù…ÙˆÙ…ÛŒ" required>
                          <button type="submit" class="btn-full" style="background: var(--primary);">ØªØºÛŒÛŒØ±</button>
                     </form>
                     
                     <button class="btn-full" style="background: var(--red-text);" onclick="resetAllData()">
                          âš ï¸ Ù¾Ø§Ú©Ø³Ø§Ø²ÛŒ Ú©Ø§Ù…Ù„ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§
                     </button>
                 </div>
            </div>

        </div>
    </div>


    <div id="userLoginModal" class="modal">
        <div class="modal-content" style="max-width: 400px;">
            <h2 style="color: var(--primary);">ğŸ” ÙˆØ±ÙˆØ¯ Ø¨Ù‡ ØµÙ†Ø¯ÙˆÙ‚</h2>
            <form onsubmit="checkUserPassword(event)">
                <label for="userPassword">Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø¹Ù…ÙˆÙ…ÛŒ:</label>
                <input type="password" id="userPassword" required>
                <button type="submit" style="background: var(--primary);">ÙˆØ±ÙˆØ¯</button>
            </form>
             <p style="text-align: center; margin-top: 15px; color:#6b7280; border-top: 1px dashed var(--border-color); padding-top: 15px;">
                  Ø¹Ø¶Ùˆ Ù†ÛŒØ³ØªÛŒØ¯ØŸ 
                  <a href="#" onclick="closeModal('userLoginModal'); openModal('joinModal');" style="color: var(--secondary); font-weight: 700;">Ù‡Ù…ÛŒÙ† Ø­Ø§Ù„Ø§ Ø«Ø¨Øª Ù†Ø§Ù… Ú©Ù†ÛŒØ¯.</a>
             </p>
        </div>
    </div>

    <div id="joinModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal('joinModal')">&times;</span>
            <h2>â• Ø«Ø¨Øª Ù†Ø§Ù… Ø¯Ø± ØµÙ†Ø¯ÙˆÙ‚</h2>
            <form onsubmit="handleJoin(event)">
                <label for="joinName">Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ:</label>
                <input type="text" id="joinName" required>
                
                <label for="joinPhone">Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³ (Ø¨Ø¯ÙˆÙ† ØµÙØ± Ø§ÙˆÙ„):</label>
                <input type="tel" id="joinPhone" placeholder="Ù…Ø§Ù†Ù†Ø¯ 912xxxxxxx" required>
                
                <button type="submit">Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¹Ø¶ÙˆÛŒØª</button>
            </form>
        </div>
    </div>

    <div id="uploadModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal('uploadModal')">&times;</span>
            <h2>ğŸ“¤ Ø§Ø±Ø³Ø§Ù„ ÙÛŒØ´ ÙˆØ§Ø±ÛŒØ²ÛŒ</h2>
            <form onsubmit="handleUpload(event)">
                <label for="uploadFile">Ø§Ù†ØªØ®Ø§Ø¨ Ø¹Ú©Ø³ ÙÛŒØ´ (Ø±Ø³ÛŒØ¯):</label>
                <input type="file" id="uploadFile" accept="image/*" required>
                <input type="hidden" id="uploadUserId"> <button type="submit">Ø¢Ù¾Ù„ÙˆØ¯ Ùˆ Ø§Ø±Ø³Ø§Ù„</button>
            </form>
        </div>
    </div>
    
    <div id="receiptModal" class="modal" onclick="closeModal('receiptModal')">
        <div class="modal-content" style="width: auto;" onclick="event.stopPropagation()">
            <span class="close-btn" onclick="closeModal('receiptModal')">&times;</span>
            <h2 style="border:none; padding-bottom: 0;">ÙÛŒØ´ ÙˆØ§Ø±ÛŒØ²ÛŒ</h2>
            <img id="receiptImg" src="" alt="ÙÛŒØ´ ÙˆØ§Ø±ÛŒØ²ÛŒ" style="max-width: 100%; max-height: 80vh;">
        </div>
    </div>
    
    <div id="adminReceiptsModal" class="modal">
        <div class="modal-content" style="max-width: 700px;">
            <span class="close-btn" onclick="closeModal('adminReceiptsModal')">&times;</span>
            <h2 id="adminReceiptsModalTitle" style="color: var(--primary);">ØªØ§Ø±ÛŒØ®Ú†Ù‡ Ø±Ø³ÛŒØ¯Ù‡Ø§</h2>
            <div id="receiptsHistoryContent">
                </div>
        </div>
    </div>
    
    <div id="summaryModal" class="modal">
        <div class="modal-content" style="max-width: 600px;">
            <span class="close-btn" onclick="closeModal('summaryModal')">&times;</span>
            <h2 id="summaryTitle" style="color: var(--winner-color);">Ø®Ù„Ø§ØµÙ‡ Ù…Ø§Ù‡</h2>
            <div id="summaryContent">
                </div>
        </div>
    </div>


    <div id="toast"><span id="toastMsg"></span></div>


    <script type="module">
        // 1. Ø§ÛŒÙ…Ù¾ÙˆØ±Øª Ú©Ø±Ø¯Ù† Ù…Ø§Ú˜ÙˆÙ„ Ù‡Ø§ÛŒ Ù…ÙˆØ±Ø¯ Ù†ÛŒØ§Ø² Firebase (Ø¨Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² CDN)
        import { initializeApp } from 'https://www.gstatic.com/firebase/9.6.0/firebase-app.js';
        import { getFirestore, collection, addDoc, getDocs, doc, setDoc, updateDoc, deleteDoc, getDoc } from 'https://www.gstatic.com/firebase/9.6.0/firebase-firestore.js';
        import { getStorage, ref, uploadBytes, getDownloadURL } from 'https://www.gstatic.com/firebase/9.6.0/firebase-storage.js';

        // 2. Ú©Ø¯ Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ (CONFIG) Ø´Ù…Ø§ Ø§Ø² Firebase
        const firebaseConfig = {
          apiKey: "AIzaSyDoG4gHFDIV3IDIMxMcI13EIcWq7USP981442cEIC", 
          authDomain: "family-fund-project.firebaseapp.com",
          projectId: "family-fund-project",
          storageBucket: "family-fund-project.appspot.com",
          messagingSenderId: "808604426576",
          appId: "1:808604426576:web:fdee08533689179b04cc55",
          measurementId: "G-FELWTDPK6G"
        };

        // 3. Ù…Ù‚Ø¯Ø§Ø±Ø¯Ù‡ÛŒ Ø§ÙˆÙ„ÛŒÙ‡ Firebase Ùˆ Firestore
        const app = initializeApp(firebaseConfig);
        window.db = getFirestore(app);
        window.storage = getStorage(app); 
        
        // 4. ÙØ±Ø§Ø®ÙˆØ§Ù†ÛŒ ÙØ§ÛŒÙ„ Ø§ØµÙ„ÛŒ Ø¬Ø§ÙˆØ§Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ù¾Ø±ÙˆÚ˜Ù‡
        import('./app.js');
    </script>

</body>
</html>